/*
	ToDo :

			* Add ML
			* Add Nvault Save System (ONLY STEAM)
			* Add natives
			* Add forwards
			* Add cvars
*/
#include <amxmodx>
#include <amxmisc>
#include <cstrike>

new const PLUGIN [] = "Get Bonus";
new const VERSION [] = "1.0";
new const AUTHOR [] = "TimeChangePeople";

new bonus_value[33];

public plugin_init()
{
	register_plugin(PLUGIN,VERSION,AUTHOR)

	register_clcmd("say /getbonus","HookGetBonus")

	register_event("Damage", "give_bonus", "b", "2!0", "3=0", "4!0")

	server_print("%s(v%s) by %s",PLUGIN,VERSION,AUTHOR)
}

public give_bonus(id)
{
	static value; value = read_data( 2 );
	static attacker; attacker = get_user_attacker(id)

	if(!is_user_alive(attacker) || !attacker)
	{
		return 1;
	}

	bonus_value[attacker] = bonus_value[attacker] + value;
	return 0;
	
}

public HookGetBonus(id)
{
	if(!bonus_value[id])
	{
		client_print(id, print_chat, "You dont have bonus !");
		return PLUGIN_HANDLED
	}

	cs_set_user_money(id, cs_get_user_money(id) + bonus_value[id]);
	bonus_value[id] = 0;
	return PLUGIN_CONTINUE
}

public client_putinserver(id)
{
	bonus_value[id] = 0;
}
